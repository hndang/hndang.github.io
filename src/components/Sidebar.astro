---
import SidebarIcon from "../components/SidebarIcon.astro";
---

<div id="sidebar" class="sb fixed bottom-4 min-w-full flex justify-center z-10">
    <div class="flex justify-center flex-col gap-0 w-full">
        <!-- TODO later -->
        <!-- <div class="flex justify-center">
        <iframe id="follow-form" width="100%" height="520" class="animate-popIn"  src="https://13fc920b.sibforms.com/serve/MUIFADoRBq2PexbVstKZQ5IDVhCkIsPhFuQZEAjW1X1ErEYQAFapBQRq90awirXbCu9Ivcuffnk4q2rML82Cjula22c9wVWtpehBdP8FkkCPJUxOh0xC-2nDmf96vZUzLYEeLS7xlAu6Lc74y7rqbPCL32WJDMDUvUfl5AFWgVHwrfs6rCdhF-eWWzLYsJ_37O5x95exKl_DSU38"  ></iframe>
        </div> -->
        <div id="mailCopied" class="flex justify-center items-center mb-4 sm:mb-0 transition-opacity opacity-0 duration-1000 hidden">
            <div class="bg-anti_atomic_1 dark:bg-atomic_1 opacity-90 m:2 sm:m-10 p-2 sm:p-2 font-bold rounded-xl min-h-fit">
                <p><span class=" text-anti_atomic_8 dark:text-atomic_8">hoangdang.eng@gmail.com</span> </p>
                <p>copied to clipboard ✅</p>
            </div>
        </div>
        
        <div class="flex justify-center">
            <div
                class="px-1 mb-2 xl:mb-8 flex rounded-full bg-anti_atomic_2 dark:bg-stone-900 bg-opacity-70 text-black dark:text-white shadow-lg"
            >
                <SidebarIcon href="#" icon="ic:baseline-home" text="Home 🏠" />
                <button id="notification">
                    <SidebarIcon
                        icon="ic:baseline-notifications-active"
                        text="Follow me 🙋"
                        href="https://13fc920b.sibforms.com/serve/MUIFANN9fKM1hpSrpcChdRIEFvdw8j5QLLew6NYvkVMxL12RLLdx722yyCe37VdjIh5fcmnm57L9c2CJDTQnHRWWoOcoeZCBR3hxQPPJ6bULUOlY84o5vM2j-tGS5Pb9m7Nj5cDMoOu2R1zu1CRh8W433a5pNRnNFOy5MR-Bq0aaBF3SQoW7xvOEr8u0palEmnSY4Bb1RU-zb-Qv"
                    />
                </button>
                <SidebarIcon
                    icon="ic:baseline-forum"
                    text="Blog 📖"
                    href='/blog/'
                />
                <SidebarIcon href='#contact' icon="ic:baseline-person" text="Profile 🙂" />
                <button id="mailButton">
                <SidebarIcon  icon="ic:baseline-email" text="Mail 📪" /></button>
            </div>
        </div>
    </div>
</div>

<script>
    // const dark_light_switch = document.querySelector("#notification") as HTMLButtonElement;
    const mailButton = document.querySelector("#mailButton") as HTMLElement
    const mailCopied = document.querySelector("#mailCopied") as HTMLElement
    let isClick = false
    // var showFollow = false;
    function copied(isClick:boolean){
        navigator.clipboard.writeText("hoangdang.eng@gmail.com")
        if(!isClick){
            isClick=true
            mailCopied.classList.remove("hidden")
            mailCopied.style.opacity = "1"
            
            setTimeout(()=>{
                mailCopied.style.opacity = "0"
            },
            1500
            )
            setTimeout(()=>{
                mailCopied.classList.add("hidden")
                isClick=false
            },
            2000
            )
        }
    }
    mailButton.onclick = () => {
        copied(isClick)
    }

    // dark_light_switch.onclick= () => {
    //     showFollow = !showFollow
    //     if (showFollow){
    //         follow_form.style.display = "inline";
    //     }
    //     else{
    //         follow_form.style.display = "none";
    //     }

    // };
</script>
